#key=query
# AdminDAO Query Properties
# \uB9E4\uC7A5 \uAD00\uB9AC \uCFFC\uB9AC
# \uB9E4\uC7A5 \uAE30\uBCF8 CRUD
store.existsByBusinessNumber=SELECT COUNT(*) FROM Store WHERE business_number = ?
store.insert=INSERT INTO Store (owner_id, store_name, business_number, address, phone_number, status, business_verified) VALUES (?, ?, ?, ?, ?, ?, ?)
store.update=UPDATE Store SET store_name = ?, address = ?, phone_number = ?, status = ?, business_verified = ? WHERE store_id = ?
store.selectById=SELECT * FROM Store WHERE store_id = ?
store.selectAll=SELECT * FROM Store
store.updateStatus=UPDATE Store SET status = ? WHERE store_id = ?
store.updateQR=UPDATE Store SET qr_path = ? WHERE store_id = ?
store.existsById=SELECT COUNT(*) FROM Store WHERE store_id = ?

# \uB9E4\uC7A5 \uD1B5\uACC4
store.countMenus=SELECT COUNT(*) FROM Menu WHERE store_id = ? AND status = 'ACTIVE'
store.countOrders=SELECT COUNT(*) FROM OrderTable WHERE store_id = ?
store.sumSales=SELECT COALESCE(SUM(total_amount), 0) FROM Payment WHERE store_id = ? AND payment_status = 'COMPLETED'
store.countPendingOrders=SELECT COUNT(*) FROM OrderTable WHERE store_id = ? AND status IN ('PENDING', 'CONFIRMED', 'PREPARING')

# \uB9E4\uC7A5 \uC694\uCCAD \uAD00\uB9AC
storeRequest.selectById=SELECT * FROM StoreRequest WHERE request_id = ?
storeRequest.selectPending=SELECT * FROM StoreRequest WHERE status = 'PENDING'
storeRequest.updateStatus=UPDATE StoreRequest SET status = ? WHERE request_id = ?

# \uC720\uC800 \uAD00\uB9AC
user.selectById=SELECT * FROM User WHERE user_id = ?
user.updateStatus=UPDATE User SET status = ? WHERE user_id = ?
user.insertForceDeleteLog=INSERT INTO ForceDeleteLog (user_id, reason, created_at) VALUES (?, ?, NOW())

# \uBA54\uB274 \uAD00\uB9AC
menu.insert=INSERT INTO Menu (store_id, menu_name, price, category, description) VALUES (?, ?, ?, ?, ?)
menu.update=UPDATE Menu SET menu_name = ?, price = ?, category = ?, description = ? WHERE menu_id = ?
menu.delete=UPDATE Menu SET status = 'INACTIVE' WHERE menu_id = ?

# \uBA54\uB274 \uC694\uCCAD \uAD00\uB9AC
menuRequest.selectById=SELECT * FROM MenuRequest WHERE request_id = ?
menuRequest.updateStatus=UPDATE MenuRequest SET status = ? WHERE request_id = ?
menuRequest.hasActiveOrders=SELECT COUNT(*) FROM OrderDetail WHERE menu_id = ? AND order_id IN (SELECT order_id FROM OrderTable WHERE status IN ('PENDING', 'CONFIRMED', 'PREPARING'))

# \uB9E4\uCD9C \uC815\uBCF4
sales.sumByPeriod=SELECT COALESCE(SUM(total_amount), 0) FROM Payment WHERE store_id = ? AND payment_date BETWEEN ? AND ? AND payment_status = 'COMPLETED'
sales.countOrdersByPeriod=SELECT COUNT(*) FROM OrderTable WHERE store_id = ? AND order_date BETWEEN ? AND ?
sales.selectDailySales=SELECT DATE(payment_date) as sale_date, SUM(total_amount) as daily_total FROM Payment WHERE store_id = ? AND payment_date BETWEEN ? AND ? AND payment_status = 'COMPLETED' GROUP BY DATE(payment_date) ORDER BY sale_date
sales.selectMenuSales=SELECT m.menu_name, SUM(od.quantity) as total_quantity, SUM(od.price * od.quantity) as total_sales FROM OrderDetail od JOIN Menu m ON od.menu_id = m.menu_id JOIN OrderTable o ON od.order_id = o.order_id WHERE o.store_id = ? AND o.order_date BETWEEN ? AND ? GROUP BY m.menu_name ORDER BY total_sales DESC

# \uCD94\uAC00 \uCFFC\uB9AC\uB4E4 (\uD544\uC694\uD55C \uACBD\uC6B0)
user.selectAll=SELECT * FROM User
user.countAll=SELECT COUNT(*) FROM User
menu.selectByStoreId=SELECT * FROM Menu WHERE store_id = ? AND status = 'ACTIVE'
menu.countByStoreId=SELECT COUNT(*) FROM Menu WHERE store_id = ? AND status = 'ACTIVE'
order.selectByStoreId=SELECT * FROM OrderTable WHERE store_id = ?
order.countByStoreId=SELECT COUNT(*) FROM OrderTable WHERE store_id = ?
payment.selectByStoreId=SELECT * FROM Payment WHERE store_id = ?
payment.sumByStoreId=SELECT COALESCE(SUM(total_amount), 0) FROM Payment WHERE store_id = ? AND payment_status = 'COMPLETED'

# \uB300\uC2DC\uBCF4\uB4DC \uD1B5\uACC4 \uCFFC\uB9AC
dashboard.totalStores=SELECT COUNT(*) FROM Store WHERE status = 'ACTIVE'
dashboard.totalUsers=SELECT COUNT(*) FROM User WHERE status = 'ACTIVE'
dashboard.pendingStoreRequests=SELECT COUNT(*) FROM StoreRequest WHERE status = 'PENDING'
dashboard.pendingMenuRequests=SELECT COUNT(*) FROM MenuRequest WHERE status = 'PENDING'

# \uBA54\uB274 \uC694\uCCAD \uC0C1\uC138 \uC870\uD68C
menuRequest.selectPending=SELECT * FROM MenuRequest WHERE status = 'PENDING'
menuRequest.selectByStoreId=SELECT * FROM MenuRequest WHERE store_id = ? AND status = 'PENDING'

# \uC8FC\uBB38 \uAD00\uB9AC
order.selectAll=SELECT * FROM OrderTable ORDER BY order_date DESC
order.selectById=SELECT * FROM OrderTable WHERE order_id = ?
order.updateStatus=UPDATE OrderTable SET status = ? WHERE order_id = ?
orderDetail.selectByOrderId=SELECT * FROM OrderDetail WHERE order_id = ?

# \uACB0\uC81C \uAD00\uB9AC
payment.selectAll=SELECT * FROM Payment ORDER BY payment_date DESC
payment.selectById=SELECT * FROM Payment WHERE payment_id = ?
payment.updateStatus=UPDATE Payment SET payment_status = ? WHERE payment_id = ?